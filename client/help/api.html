<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset='UTF-8'">
	<title>Help Index</title>
	<link rel="stylesheet" type="text/css" href="../libraries/reset-min.css"/>
	<link rel="stylesheet/less" type="text/css" href="help.less"/>
	<script src="../libraries/less-1.3.3.min.js"></script>
</head>
<body>
	<h1>API reference</h1>

	<h2>Things the server will call</h2>
	<p>
		A room script may (and in some cases, must) provide some subroutines with
		special names. These are called by thickishstring when something
		happens.
	</p>
	<ul>
		<li>
			<p><a id="RoomDescription"><code>RoomDescription</code></a></p>
			<p>
				Returns a markup object describing the current room. This is
				used to show the player the current room description. This
				must be present.
			</p>
			<p>
				Note that this subroutine <i>returns</i> the room description,
				rather than directly telling the player! This subroutine should
				have no side effects and should not actually change anything.
			</p>
		</li>

		<li>
			<p><a id="Actions"><code>Actions</code></a></p>
			<p>
				Returns a list of <a href="#Action">Action</a> objects
				describing the actions currently available to the player.
				This must be present.
			</p>
			<p>
				This subroutine should have no side effects and should not
				actually change anything.
			</p>
		</li>
	</ul>

	<h2>Things the script can call</h2>
	<p>
		The server will provide these values to the script, which do
		various useful things.
	</p>
	<ul>
		<li>
			<p><a id="Action"><code>Action(description, consequence)</code></a></p>
			<p>
				This returns an Action object. When embedded in
				markup, this object provides a link to the player that, when
				clicked on, does something.
			</p>
			<p>
				<code>description</code> must be <b>markup</b>.
			</p>
			<p>
				<code>consequence</code> must be a <b>string</b>.
			</p>
			<p>
				<code>consequence</code> may either be the name of a
				subroutine in this room, in which case the action will call
				the subroutine, or else it may be a string of the form
				<code>&gt;roomname</code>, in which case the action will
				automatically move the player to the specified room.
			</p>
			<p>
				It is possible to embed an Action object inside another
				Action object's markup, but it doesn't do anything useful.
			</p>
		</li>

		<li>
			<p><a id="Player"><code>Player(name)</code></a></p>
			<p>
				This returns a Player object for the player with the
				specified name. If no such player exists in the current
				instance, <code>nil</code> is returned.
			</p>
			<p>
				<code>name</code> must be a <b>string</b>.
			</p>
			<p>
				See the section on <a href="#player"><code>player</code></a>
				for more information on Player objects.
			</p>
		</li>

		<li>
			<p><a id="Room"><code>Room(name)</code></a></p>
			<p>
				This returns a Room object for the room with the
				specified name. If no such room exists in the current
				instance, <code>nil</code> is returned.
			</p>
			<p>
				<code>name</code> must be a <b>string</b>.
			</p>
			<p>
				See the section on <a href="#room"><code>room</code></a>
				for more information on Room objects.
			</p>
		</li>
	</ul>

	<h2><a id="player">Player objects</a></h2>
	<p>
		Players are manipulated via Player objects. These can be found using
		the <a href="#Player"><code>Player()</code></a> function; and the
		Player object for the current player is always available as
		<code>player</code>.
	</p>
	<p>
		Player objects may be embedded in markup, in which case they expand
		to be the name of the player. They also support the following methods:
	</p>
	<ul>
		<li>
			<p><a id="player-tell"><code>player.tell(message)</code></a></p>
			<p>
				Tells the specified player something.
			</p>
			<p>
				<code>message</code> must be <b>markup</b>.
			</p>
		</li>
	</ul>

	<h2><a id="room">Room objects</a></h2>
	<p>
		Rooms are manipulated via Room objects. These can be found using
		the <a href="#Room"><code>Room()</code></a> function; and the
		Room object for the current player's location is always available as
		<code>room</code>.
	</p>
	<p>
		Room objects may be embedded in markup, in which case the expand to
		be the room's title. They also support the following methods:
	</p>
	<ul>
		<li>
			<p><a id="room-broadcast"><code>room.broadcast(message)</code></a></p>
			<p>
				Tells something to everyone in the room.
			</p>
			<p>
				<code>message</code> must be <b>markup</b>.
			</p>
		</li>

		<li>
			<p><a id="room-tell"><code>room.tell(message)</code></a></p>
			<p>
				Tells something to everyone in the room <i>except</i> the
				current player.
			</p>
			<p>
				<code>message</code> must be <b>markup</b>.
			</p>
			<p>
				This is most commonly used paired with
				<a href="#player-tell"><code>player.tell()</code></a>, as
				follows:
			</p>
			<pre>
sub ActionRoutine
	player.tell("You do something.")
	room.tell("{$player} does something.")
endsub
</pre>
		</li>
	</ul>


</body>
</html>

