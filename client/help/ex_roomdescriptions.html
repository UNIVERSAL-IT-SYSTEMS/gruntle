<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset='UTF-8'">
	<title>Help Index</title>
	<link rel="stylesheet" type="text/css" href="../libraries/reset-min.css"/>
	<link rel="stylesheet/less" type="text/css" href="help.less"/>
	<script src="../libraries/less-1.3.3.min.js"></script>
</head>
<body>
	<h1>Examples: room descriptions</h1>

	<p>
		The simplest kind of room description is as follows:
	</p>
<pre>
sub RoomDescription
	return "You are down a deep, dark hole."
endsub
</pre>
	<p>
		A blank line indicates a paragraph break.
	</p>
<pre>
sub RoomDescription
	return "You are down a deep, dark hole.

		Did we mention how dark it is?"
endsub
</pre>
	<p>
		If you want the room description to adapt according to circumstances,
		then logic can be inserted.
	</p>
<pre>
sub RoomDescription
	if $lightSwitchedOn = true then
		return "You are down a deep hole. The light
			from a bare bulb simply highlights how
			bleak it is."
	else
		return "You are down a deep, dark hole."
	endif
endsub
</pre>
	<p>
		It's also possible to build the description out of multiple sections.
		This is useful for conditionally adding text.
	</p>
<pre>
sub RoomDescription
	r = "You are down a deep, dark hole."
	if $grueIsAwake = true then
		r = r + " Something snuffles disturbingly
			in the distance."
	endif
	return r
endsub
</pre>
	<p>
		Alternatively expressions can be embedded in the text itself.
	</p>
<pre>
sub RoomDescription
	if $adventurersEaten = nil then
		$adventurersEaten = 0
	endif

	return "You are down a deep, dark hole. The
		only light comes from an illuminated sign,
		which says 'ADVENTURERS EATEN TODAY:
		{$adventurersEaten}'."
endsub
</pre>
	<p>
		Note that we have to explicitly test to see if the value of the
		global variable is <code>nil</code>, and set it to a sane number if
		so. This is because variables in a new instance are always
		initialised to <code>nil</code>. You can rely on
		<code>RoomDescription()</code> being called first in your room
		script, so this makes a good place to initialise state.
	</p>
	<p>
		Remember, though, that global variables are held in common among
		all rooms in the realm! So if another room wants to use
		<code>$adventurersEaten</code>, then it will have to check to see
		whether it's been initialised as well.
	</p>
</body>
</html>

