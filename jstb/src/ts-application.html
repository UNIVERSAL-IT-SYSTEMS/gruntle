<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">
<link rel="import" href="ts-document.html">

<dom-module id="ts-application">
<template>
	<style>
	  :host {
		display: block;
	  }
	</style>

	<ts-document id="doc"
		hub-document="0ByWQADzU1i2wa3N1VmVweS1EOE0"
		world-document="0ByWQADzU1i2wampHaEZ0OEJLOVk"
		on-connected="onDocumentConnected"
		on-connection-error="onServerError"
		on-disconnected="onDocumentDisconnected"
		on-arrivals-departures="onArrivalsDepartures"
		>
	</ts-document>

	<paper-spinner active></paper-spinner>
  </template>
</template>
<script>
(function () {
"use strict";

Polymer({
	is: "ts-application",

	ready: function() {
		this.message = "Loading";
		this.$.doc.connect();
	},

	onServerError: function(e) {
		console.log("server error!", e);
	},

	onDocumentConnected: function() {
		const $ = this.$;

		console.log("connected");
		//$.doc.makeWorld();
	},

	onDocumentDisconnected: function() {
		console.log("disconnected");
	},

	onArrivalsDepartures: function(e, changes) {
		console.log("arriving/departing", changes);
	}
});


})();
</script>
</dom-module>
