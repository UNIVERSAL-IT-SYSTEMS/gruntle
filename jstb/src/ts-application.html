<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="ts-document.html">

<dom-module id="ts-application">
<template>
	<style>
	  :host {
		display: block;
	  }
	</style>

	<ts-document id="doc"
		hub-document="0ByWQADzU1i2wa3N1VmVweS1EOE0"
		world-document="0ByWQADzU1i2wampHaEZ0OEJLOVk"
		on-connected="onDocumentConnected"
		on-connection-error="onServerError"
		on-disconnected="onDocumentDisconnected"
		></ts-document>
  </template>
</template>
<script>
(function () {
"use strict";

Polymer({
	is: "ts-application",

	ready: function() {
		this.message = "Loading";
		this.$.doc.connect();
	},

	onServerError: function(e) {
		console.log("server error!", e);
	},

	onDocumentConnected: function() {
		const $ = this.$;

		console.log("connected");
		console.log("get:", $.doc.hub.getRoot().get("test message").text);
		$.doc.hub.getRoot().set(
			"test message",
			this.$.doc.hub.createString("Hello, world!"));
	},

	onDocumentDisconnected: function() {
		console.log("disconnected");
	}
});


})();
</script>
</dom-module>
